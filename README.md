# Brewery Lambda Function

This project contains Terraform configuration for deploying an AWS Lambda function that queries the Open Brewery DB API for breweries in Columbus, Ohio. The Lambda function logs the results to CloudWatch and returns a JSON list of breweries sorted by name.

## Prerequisites

- AWS CLI configured with appropriate permissions
- Terraform installed
- Python 3.8 installed

## Setup

1. **Clone the repository:**

    ```sh
    git clone <repository_url>
    cd <repository_name>
    ```

2. **Create a Python virtual environment and install dependencies:**

    ```sh
    python3 -m venv venv
    source venv/bin/activate
    pip install -r requirements.txt
    ```

3. **Run unit tests:**

    ```sh
    python -m unittest discover -s tests
    ```

4. **Initialize and apply Terraform configuration:**

    ```sh
    terraform init
    terraform apply
    ```

    Follow the prompts to approve the plan and apply the configuration.

## Resources Created

- IAM Role and Policies for the Lambda function
- S3 Bucket to store Lambda function code
- Lambda function to query the Open Brewery DB API
- CloudWatch Log Group for logging

## Lambda Function

The Lambda function queries the Open Brewery DB API for breweries in Columbus, Ohio, logs the results to CloudWatch, and returns a JSON list of breweries sorted by name.

## Testing

Unit tests are provided in the `tests` directory. You can run the tests with the following command:

```sh
python -m unittest discover -s tests
```

To view the logs for your Lambda function in AWS CloudWatch, follow these steps:

Using the AWS Management Console
Sign in to the AWS Management Console:
Go to the AWS Management Console.

Navigate to CloudWatch:
In the AWS Management Console, find and select CloudWatch from the list of services.

Access Log Groups:
In the CloudWatch dashboard, on the left-hand side menu, click on Log groups.

Find Your Lambda's Log Group:
Look for a log group named /aws/lambda/brewery-lambda. This log group was created by the Terraform configuration.

View Log Streams:
Click on the log group. You will see a list of log streams. Each log stream corresponds to a single execution of your Lambda function.

View Log Entries:
Click on a log stream to see the log entries. Each entry will include log messages generated by your Lambda function, including the JSON logs of the breweries.
